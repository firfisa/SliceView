<!DOCTYPE html>
<html>
<head>
    <title>SVG to PNG Converter</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        #canvas { border: 1px solid #ccc; margin: 20px 0; }
        button { padding: 10px 20px; margin: 10px; font-size: 16px; }
    </style>
</head>
<body>
    <h1>SliceView Icon Generator</h1>
    <div id="svg-container">
        <svg id="icon-svg" width="512" height="512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
          <!-- 背景圆形 -->
          <circle cx="256" cy="256" r="240" fill="#4A90E2" stroke="#2E5C8A" stroke-width="8"/>
          
          <!-- 主要切片图标 -->
          <g transform="translate(256, 256)">
            <!-- 大矩形框架 -->
            <rect x="-120" y="-80" width="240" height="160" fill="none" stroke="#FFFFFF" stroke-width="6" rx="12"/>
            
            <!-- 切片线条 -->
            <line x1="-80" y1="-80" x2="-80" y2="80" stroke="#FFFFFF" stroke-width="4" stroke-dasharray="8,4"/>
            <line x1="0" y1="-80" x2="0" y2="80" stroke="#FFFFFF" stroke-width="4" stroke-dasharray="8,4"/>
            <line x1="80" y1="-80" x2="80" y2="80" stroke="#FFFFFF" stroke-width="4" stroke-dasharray="8,4"/>
            
            <line x1="-120" y1="-40" x2="120" y2="-40" stroke="#FFFFFF" stroke-width="4" stroke-dasharray="8,4"/>
            <line x1="-120" y1="40" x2="120" y2="40" stroke="#FFFFFF" stroke-width="4" stroke-dasharray="8,4"/>
            
            <!-- 选中的切片区域 -->
            <rect x="-40" y="-40" width="80" height="80" fill="#FFD700" fill-opacity="0.8" stroke="#FFA500" stroke-width="3" rx="6"/>
            
            <!-- 放大镜图标 -->
            <g transform="translate(60, -60)">
              <circle cx="0" cy="0" r="20" fill="none" stroke="#FFFFFF" stroke-width="4"/>
              <line x1="14" y1="14" x2="28" y2="28" stroke="#FFFFFF" stroke-width="4" stroke-linecap="round"/>
            </g>
            
            <!-- 窗口图标 -->
            <g transform="translate(-60, 60)">
              <rect x="-12" y="-8" width="24" height="16" fill="none" stroke="#FFFFFF" stroke-width="3" rx="2"/>
              <line x1="-12" y1="-4" x2="12" y2="-4" stroke="#FFFFFF" stroke-width="2"/>
              <circle cx="-8" cy="-6" r="1" fill="#FFFFFF"/>
              <circle cx="-4" cy="-6" r="1" fill="#FFFFFF"/>
              <circle cx="0" cy="-6" r="1" fill="#FFFFFF"/>
            </g>
          </g>
          
          <!-- 装饰性光效 -->
          <circle cx="180" cy="150" r="8" fill="#FFFFFF" fill-opacity="0.6"/>
          <circle cx="350" cy="200" r="6" fill="#FFFFFF" fill-opacity="0.4"/>
          <circle cx="320" cy="380" r="10" fill="#FFFFFF" fill-opacity="0.5"/>
        </svg>
    </div>
    
    <canvas id="canvas" width="512" height="512"></canvas>
    
    <div>
        <button onclick="convertToPNG()">转换为PNG</button>
        <button onclick="downloadPNG()">下载PNG</button>
    </div>
    
    <script>
        function convertToPNG() {
            const svg = document.getElementById('icon-svg');
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            const svgData = new XMLSerializer().serializeToString(svg);
            const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
            const svgUrl = URL.createObjectURL(svgBlob);
            
            const img = new Image();
            img.onload = function() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0, 512, 512);
                URL.revokeObjectURL(svgUrl);
                console.log('PNG转换完成');
            };
            img.src = svgUrl;
        }
        
        function downloadPNG() {
            const canvas = document.getElementById('canvas');
            const link = document.createElement('a');
            link.download = 'icon.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        // 页面加载时自动转换
        window.onload = function() {
            setTimeout(convertToPNG, 100);
        };
    </script>
</body>
</html>